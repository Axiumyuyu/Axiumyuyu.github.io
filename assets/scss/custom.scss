/* 1. 基础设定：给幽灵图层提供定位基准 */
body {
    position: relative;
    z-index: 0; 
    /* 强行去掉主题自带的纯色背景，让底层的图片透上来 */
    background-color: transparent; 
}

/* 2. 召唤幽灵图层：作为两张背景图的画板 */
body::before,
body::after {
    content: "";
    position: fixed;
    /* 极其关键的细节：向外围扩充 30px。防止高斯模糊在屏幕边缘产生泛白的“光晕”漏光现象 */
    top: -30px; right: -30px; bottom: -30px; left: -30px;
    z-index: -1; /* 永远藏在文章和卡片的最后面 */
    
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    
    /* 核心 1：毛玻璃模糊效果。你可以调整 15px 这个数值控制模糊程度 */
    filter: blur(10px);
    
    /* 核心 2：平滑的透明度渐变。0.8s 是动画持续时间，ease-in-out 让呼吸感更自然 */
    transition: opacity 0.8s ease-in-out, filter 0.8s ease-in-out;
}

/* 3. 分配图片：各司其职 */
body::before {
    background-image: url('/img/bg-light.jpg');
}
body::after {
    background-image: url('/img/bg-dark.jpg');
}

/* 4. 掌控切换逻辑：用透明度（Opacity）实现无缝淡入淡出 */

/* 当处于浅色模式时... */
[data-scheme="light"] body::before {
    opacity: 1; /* 显示浅色图 */
    /* 稍微调暗一点点背景（brightness），防止背景太亮导致白色卡片看不清 */
    filter: blur(0px) brightness(0.8);
}
[data-scheme="light"] body::after {
    opacity: 0; /* 隐藏深色图 */
}

/* 当处于深色模式时... */
[data-scheme="dark"] body::before {
    opacity: 0; /* 隐藏浅色图 */
}
[data-scheme="dark"] body::after {
    opacity: 1; /* 显示深色图 */
    /* 深色模式下大幅度压低背景亮度，保护视力，让深色卡片更具浮雕感 */
    filter: blur(0px) brightness(0.7); 
}

/* =========================================
   1. 动态背景：鼠标悬浮文章时背景变清晰
   ========================================= */

/* 浅色模式下，如果有文章被 hover，背景模糊度降为 0 */
[data-scheme="light"] body:has(.article-list article:hover)::before {
    filter: blur(6px) brightness(0.7);
}

/* 深色模式下，如果有文章被 hover，背景模糊度降为 0 */
[data-scheme="dark"] body:has(.article-list article:hover)::after {
    filter: blur(6px) brightness(0.6);
}
[data-scheme="light"] #main-menu>li:hover {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    // transform: scale(1.02);
    transition: transform 0.3s ease;
}
[data-scheme="dark"] #main-menu>li:hover {
    text-shadow: 1px 1px 2px rgba(187, 187, 187, 0.8);
    
}

/* （可选）如果你希望鼠标悬浮在左侧菜单卡片上时，背景也变清晰，可以加上下面这两行 */
[data-scheme="light"] body:has(#main-menu li:hover,.main-article:hover, main.main article:hover)::before { filter: blur(6px) brightness(0.7); }
[data-scheme="dark"] body:has(#main-menu li:hover, .main-article:hover, main.main article:hover)::after { filter: blur(6px) brightness(0.6); }

.article-list article, span.emoji, .main-article, #waline, div.wl-comment, div.wl-panel {
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.8s ease, color 0.8s ease;
}

/* 浅色模式下的 Hover 效果 */
[data-scheme="light"] .article-list article:hover {
    transform: translateY(-5px) scale(1.01);
    /* 给整个白底卡片加上阴影 */
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

/* 深色模式下的 Hover 效果 */
[data-scheme="dark"] .article-list article:hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6);
}

[data-scheme="light"] a span, h2.site-description {
    color: #24394e;
}
